<form>
  <label>Cognos- RT Job Analysis_Dropdown Copy</label>
  <fieldset submitButton="false" autoRun="true">
    <input type="dropdown" token="Span" searchWhenChanged="true">
      <showClearButton>false</showClearButton>
      <label>Hours</label>
      <default>1</default>
      <choice>1</choice>
      <choice>2</choice>
      <choice>4</choice>
      <choice>8</choice>
    </input>
  </fieldset>
  <row>
    <panel>
      <title>#Trend Analysis</title>
      <single>
  <!-- ##########################################Showing total job counts in system  ######################################## -->
        <title># Jobs</title>
        <search>
          <query>index=cognosstreaming| rex "(?:[^\t\n]*\t){16}(?P&lt;runcode&gt;[^\t]*)" | search runcode="" OR runcode=Run OR runcode=Warning OR runcode=Success 
                  OR runcode=Failure |eval status11 =1 |bin _time span=1h 
                | stats sum(status11) AS perHour_a by _time 
                | reverse 
                |  timechart span=1h values(perHour_a) as perHour_b sum(perHour_a) AS perHour_c</query>
          <earliest>-60h@m</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="colorMode">none</option>
        <option name="drilldown">none</option>
        <option name="height">143</option>
        <option name="showSparkline">1</option>
        <option name="showTrendIndicator">1</option>
        <option name="trendColorInterpretation">standard</option>
        <option name="trendInterval">-1h</option>
        <option name="underLabel">compared to 1 hour before</option>
        <option name="unitPosition">before</option>
        <option name="useColors">0</option>
        <option name="useThousandSeparators">1</option>
      </single>
      <single>
        <title># Failed</title>
 <!-- ##########################################Showing total Failed counts in system  ######################################## -->
         <search>
          <query>index=cognosstreaming| rex "(?:[^\t\n]*\t){16}(?P&lt;runcode&gt;[^\t]*)" |search runcode=Failed| eval runcode15 =1|bin _time span=1h 
                | stats sum(runcode15) AS perHour15 by _time 
                | reverse 
                | timechart span=1h sum(perHour15) AS Total5</query>
          <earliest>-20d</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="colorBy">trend</option>
        <option name="colorMode">block</option>
        <option name="drilldown">all</option>
        <option name="height">143</option>
        <option name="showSparkline">1</option>
        <option name="showTrendIndicator">1</option>
        <option name="trendColorInterpretation">inverse</option>
        <option name="trendInterval">-1h</option>
        <option name="underLabel">compared to 1 hour before</option>
        <option name="unitPosition">before</option>
        <option name="useColors">1</option>
        <option name="useThousandSeparators">1</option>
      </single>
      <table>
  <!-- ##########################################  Pls create Drill down link when user click on Failed box then it show show dispatcur count  i.e below one   ######################################## -->
  <!-- ################################################################################ -->
 
        <title>Failure by Dispatcher's</title>
        <search>
          <query>index=cognosstreaming|rex "^(?P&lt;Dispatcher&gt;[^\t]*)" | eval Dispatcher=replace (Dispatcher,"\[","") |eval Dispatcher=replace (Dispatcher,"\]","")| rex "(?:[^\t\n]*\t){16}(?P&lt;runcode&gt;[^\t]*)" |search runcode=Success| stats count by Dispatcher</query>
          </search>
        <drilldown>
          <set token="Dispatcher">$row.Dispatcher$</set>
        </drilldown>
      </table>
    </panel>
  </row>
  <row>
    <panel depends="$Dispatcher$">
      <title>Error Messages by Dispatcher- $Dispatcher$</title>
      <table>
        <search>
          <query>index=cognosstreaming|rex "^(?P&lt;Dispatcher&gt;[^\t]*)" | eval Dispatcher=replace (Dispatcher,"\[","") |
	  eval Dispatcher=replace (Dispatcher,"\]","")| rex "(?:[^\t\n]*\t){16}(?P&lt;runcode&gt;[^\t]*)" 
	  | rex "(?:[^\t\n]*\t){17}(?P&lt;reasoncode&gt;[^\t]*)" | rex max_match=0 "&lt;messageString&gt;(?&lt;reasoncode&gt;[^\\&lt;\"]*)" 
	  | eval ErrorMessage=if(reasoncode=="","Note to Admin Team: Missing Detalied Error Message",reasoncode)| search runcode=Success Dispatcher="$Dispatcher$" 
           | stats count by ErrorMessage|sort - count</query>
          </search>
      </table>
    </panel>
  </row>
</form>
